# خارطة طريق مشروع منصة الخدمات الموحدة (Unified Service Platform)

## 0. مرحلة التأسيس والتوثيق (Consolidation Phase) - [Current Focus]
- [x] **توثيق المعمارية (Architecture Documentation):** إنشاء `ARCHITECTURE.md`.
- [x] **تنظيف الكود (Code Cleanup):** إزالة الملفات غير المستخدمة والأكواد التجريبية.
- [ ] **توحيد قاعدة البيانات:** دمج ملفات SQL المتناثرة في سكربت واحد.

## Core v1.1: Workflow Strengthening
- [ ] **Workflow Definition Hardening (Validator):**
    - [ ] Define Zod Schema for Workflow JSON.
    - [ ] Create Validator Helper.
    - [ ] Enforce Validator on Save.
    - [ ] Add `version` field.

## 1. إدارة الطلبات وسير العمل (Request Management)
- [x] **صفحة تفاصيل الطلب (Request Details):**
  - [x] عرض بيانات النموذج.
  - [ ] عرض المخطط الزمني (Timeline).
- [ ] **صندوق المهام (Inbox/Approvals):**
  - [x] قائمة طلبات المدير.
  - [x] أزرار اتخاذ القرار (موافقة/رفض).
- [ ] **محرك سير العمل (Workflow Engine):**
  - [x] الانتقال الأساسي (Draft -> Approved).
  - [x] دعم تعدد الخطوات ديناميكياً (Needs Verification).
  - [x] دعم التوجيه للمدير المباشر (Direct Manager Routing).

## 2. تجربة المستخدم (User Experience)
- [ ] **لوحة تحكم المستخدم (User Dashboard):**
  - عرض إحصائيات شخصية (طلباتي النشطة، المكتملة).
  - قائمة "آخر النشاطات".
- [x] **نظام الإشعارات (Notifications):**
  - [x] تنبيهات داخل النظام في حال تغيير حالة الطلب.
  - [x] تنبيهات عند تعيين مهمة جديدة لموظف.
  - (مستقبلاً) إشعارات عبر البريد الإلكتروني.

## 3. محرك النماذج المتطور (Advanced Form Engine)
- [ ] **أنواع حقول متقدمة:**
  - رفع الملفات (File Upload) مع تخزين في Supabase Storage.
  - حقول بحث ديناميكية (Lookup fields) من جداول أخرى (مثل اختيار موظف بديل).
  - الاعتمادية الشرطية (إظهار حقل بناءً على قيمة حقل آخر).
- [ ] **التحقق (Validation):**
  - قواعد تحقق مخصصة (أرقام هواتف، بريد إلكتروني رسمي، إلخ).

## 4. الإدارة والتحكم (Admin & Control)
- [ ] **إدارة الصلاحيات (RBAC):**
  - تمييز فعلي بين "الموظف" و"مدير النظام" و"الموافق".
  - حماية الصفحات (Middleware Protection).
- [ ] **لوحة تحكم التحليلات (Analytics Dashboard):**
  - استبدال البيانات الوهمية (Mock Data) ببيانات حقيقية من قاعدة البيانات.
  - تقارير أداء الخدمات (SLA Reports).

## 5. التحسينات التقنية
- [ ] **معالجة الأخطاء (Error Handling):** إنشاء صفحات خطأ مخصصة ورسائل توجيهية ودودة.
- [ ] **الأمان:** مراجعة قواعد RLS في Supabase لضمان خصوصية البيانات.

---
تم التحديث: 2025-12-06
يمكنك استخدام هذا الملف كمرجع لتحديد المهام في الجلسات القادمة.
